Super small (~ 581 bytes minified) encoder in pure javascript
