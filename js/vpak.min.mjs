var g=new TextDecoder,h=new TextEncoder,f=8,l=h.encode("VPak 1.1");function u(e,o){if(e.length!==o.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==o[n])return!1;return!0}export function serialize(e){let o=f;var n=[];for(var c in e){var s=h.encode(c);n.push(s),o+=1+s.byteLength+4+e[c].byteLength}var r=new Uint8Array(o);r.set(l,0);let t=f,y=0;for(var c in e){var s=n[y++];r[t++]=s.byteLength,r.set(s,t),t+=s.byteLength;var i=e[c].byteLength;r[t++]=i>>24&255,r[t++]=i>>16&255,r[t++]=i>>8&255,r[t++]=i&255,r.set(e[c],t),t+=i}return r}export function deserialize(e){if(!u(e.subarray(0,f),l))throw new Error("Invalid header");var o={};let n=f;for(;n<e.length;){var r=e[n++],t=g.decode(e.subarray(n,n+=r)),y=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];o[t]=e.subarray(n,n+y),n+=y}return o}